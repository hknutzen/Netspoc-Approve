{"file":"lib/Netspoc/Approve/Device.pm","condition":[[80,{"op":"and","left":"$system_user","type":"and_3","right":"$self->{'USER'} eq $system_user"}],[248,{"right":"{}","type":"or_2","left":"$hash->{$word}","op":"||="}],[309,{"right":"$part_success","type":"or_3","left":"$success","op":"||="}],[372,{"left":"$named","op":"and","right":"$named ne 'from_parser'","type":"and_3"}],[400,{"left":"$named","op":"and","right":"$named eq 'from_parser'","type":"and_3"}],[421,{"type":"or_2","right":"{}","op":"||=","left":"$dest->{$x}"}],[470,{"right":"keys %$v","type":"and_3","left":"ref $v eq 'HASH'","op":"and"}],[481,{"op":"||=","left":"$spoc_conf->{$key}","type":"or_2","right":"{}"}],[485,{"type":"or_2","right":"[]","op":"||=","left":"$spoc_v->{$vrf}"}],[495,{"left":"$spoc_conf->{$key}","op":"||=","right":"{}","type":"or_2"}],[513,{"left":"$a->{'BASE'} == $b->{'BASE'}","op":"and","right":"$a->{'MASK'} == $b->{'MASK'}","type":"and_3"}],[515,{"op":"or","left":"defined $a->{$key}","type":"or_3","right":"defined $b->{$key}"}],[518,{"type":"and_3","right":"defined $b->{$key}","op":"and","left":"defined $a->{$key}"}],[518,{"right":"$a->{$key} eq $b->{$key}","type":"and_3","left":"defined $a->{$key} and defined $b->{$key}","op":"and"}],[527,{"right":"$a->{'MASK'} == $b->{'MASK'}","type":"and_3","left":"$a->{'BASE'} == $b->{'BASE'}","op":"&&"}],[553,{"op":"||=","left":"$conf_vrf->{$vrf}","type":"or_2","right":"[]"}],[664,{"right":"$self->handle_reload_banner(\\$out)","type":"and_3","left":"$self->{'RELOAD_SCHEDULED'}","op":"and"}],[697,{"type":"and_3","right":"$self->handle_reload_banner(\\$out)","op":"and","left":"$self->{'RELOAD_SCHEDULED'}"}],[706,{"type":"and_3","right":"$self->handle_reload_banner(\\$out)","op":"and","left":"$self->{'RELOAD_SCHEDULED'}"}],[768,{"op":"||=","left":"$self->{'HARDWARE'}","type":"or_2","right":"'unknown'"}],[859,{"type":"or_2","right":"0","op":"||=","left":"$self->{'CHANGE'}{$parse_name}"}],[929,{"type":"and_3","right":"not -d $dirname","op":"and","left":"$dirname"}],[965,{"op":"or","left":"$file_exists","type":"or_3","right":"chmod 0666, $lockfile"}]],"subroutine":[[31,"BEGIN"],[32,"BEGIN"],[33,"BEGIN"],[34,"BEGIN"],[35,"BEGIN"],[36,"BEGIN"],[37,"BEGIN"],[45,"new"],[55,"match"],[76,"get_aaa_password"],[114,"get_user_password"],[135,"get_spoc_data"],[153,"load_spocfile"],[166,"load_raw"],[206,"load_spoc"],[217,"load_device"],[241,"add_prefix_info"],[259,"parse_seq"],[331,"parse_line"],[359,"parse_config1"],[456,"parse_config"],[466,"merge_rawdata"],[511,"route_line_a_eq_b"],[526,"route_line_destination_a_eq_b"],[533,"unique"],[539,"vrf_route_mode"],[545,"process_routing"],[618,"issue_cmd"],[627,"cmd"],[639,"device_cmd"],[645,"shcmd"],[651,"cmd_check_echo"],[660,"get_cmd_output"],[674,"cmd_abort_on_error"],[682,"two_cmd"],[717,"abort_cmd"],[724,"schedule_reload"],[729,"cancel_reload"],[733,"checkidentity"],[745,"search_banner"],[750,"checkbanner"],[763,"get_version"],[773,"banner_msg"],[786,"move_logfile"],[795,"con_setup"],[803,"con_shutdown"],[815,"con_set_logtype"],[824,"connect_ssh"],[840,"prepare_device"],[850,"mark_as_changed"],[858,"mark_as_unchanged"],[863,"print_change_status"],[875,"found_changes"],[880,"compare_common"],[887,"compare"],[899,"compare_files"],[907,"approve"],[923,"logging"],[958,"lock"],[973,"unlock"]],"digest":"fc1740f2776b0c478b970dff2770682d","pod":[[45,"new"],[55,"match"],[76,"get_aaa_password"],[114,"get_user_password"],[135,"get_spoc_data"],[153,"load_spocfile"],[166,"load_raw"],[206,"load_spoc"],[217,"load_device"],[241,"add_prefix_info"],[259,"parse_seq"],[331,"parse_line"],[359,"parse_config1"],[456,"parse_config"],[466,"merge_rawdata"],[511,"route_line_a_eq_b"],[526,"route_line_destination_a_eq_b"],[533,"unique"],[539,"vrf_route_mode"],[545,"process_routing"],[618,"issue_cmd"],[627,"cmd"],[639,"device_cmd"],[645,"shcmd"],[651,"cmd_check_echo"],[660,"get_cmd_output"],[674,"cmd_abort_on_error"],[682,"two_cmd"],[717,"abort_cmd"],[724,"schedule_reload"],[729,"cancel_reload"],[733,"checkidentity"],[745,"search_banner"],[750,"checkbanner"],[763,"get_version"],[773,"banner_msg"],[786,"move_logfile"],[795,"con_setup"],[803,"con_shutdown"],[815,"con_set_logtype"],[824,"connect_ssh"],[840,"prepare_device"],[850,"mark_as_changed"],[858,"mark_as_unchanged"],[863,"print_change_status"],[875,"found_changes"],[880,"compare_common"],[887,"compare"],[899,"compare_files"],[907,"approve"],[923,"logging"],[958,"lock"],[973,"unlock"]],"start":{"76":{"get_aaa_password":[{"branch":null,"time":null,"statement":29,"pod":2,"subroutine":9,"condition":null}]},"359":{"parse_config1":[{"branch":43,"time":null,"statement":182,"subroutine":19,"pod":12,"condition":3}]},"259":{"parse_seq":[{"time":null,"branch":20,"condition":2,"subroutine":17,"pod":10,"statement":134}]},"674":{"cmd_abort_on_error":[{"time":null,"branch":92,"condition":17,"subroutine":33,"pod":26,"statement":364}]},"645":{"shcmd":[{"statement":348,"subroutine":30,"pod":23,"condition":16,"branch":89,"time":null}]},"717":{"abort_cmd":[{"statement":388,"condition":19,"subroutine":35,"pod":28,"time":null,"branch":97}]},"55":{"match":[{"statement":24,"subroutine":8,"pod":1,"condition":null,"branch":null,"time":null}]},"331":{"parse_line":[{"pod":11,"subroutine":18,"condition":3,"statement":171,"branch":38,"time":null}]},"973":{"unlock":[{"time":null,"branch":123,"statement":516,"condition":23,"subroutine":59,"pod":52}]},"958":{"lock":[{"condition":22,"subroutine":58,"pod":51,"statement":510,"time":null,"branch":120}]},"850":{"mark_as_changed":[{"pod":42,"subroutine":49,"condition":20,"statement":455,"branch":110,"time":null}]},"899":{"compare_files":[{"time":null,"branch":111,"statement":482,"condition":21,"subroutine":55,"pod":48}]},"750":{"checkbanner":[{"statement":400,"pod":33,"subroutine":40,"condition":19,"branch":98,"time":null}]},"545":{"process_routing":[{"pod":19,"subroutine":26,"condition":15,"statement":291,"branch":79,"time":null}]},"466":{"merge_rawdata":[{"time":null,"branch":69,"statement":250,"condition":6,"subroutine":21,"pod":14}]},"166":{"load_raw":[{"statement":83,"subroutine":13,"pod":6,"condition":1,"branch":10,"time":null}]},"45":{"new":[{"subroutine":7,"pod":null,"condition":null,"statement":21,"branch":null,"time":null}]},"660":{"get_cmd_output":[{"branch":90,"time":null,"pod":25,"subroutine":32,"condition":16,"statement":355}]},"786":{"move_logfile":[{"branch":102,"time":null,"subroutine":43,"pod":36,"condition":20,"statement":416}]},"539":{"vrf_route_mode":[{"time":null,"branch":79,"condition":15,"pod":18,"subroutine":25,"statement":290}]},"36":{"BEGIN":[{"condition":null,"pod":null,"subroutine":5,"statement":15,"time":null,"branch":null}]},"153":{"load_spocfile":[{"time":null,"branch":9,"statement":75,"condition":1,"pod":5,"subroutine":12}]},"651":{"cmd_check_echo":[{"statement":351,"subroutine":31,"pod":24,"condition":16,"branch":89,"time":null}]},"729":{"cancel_reload":[{"time":null,"branch":97,"condition":19,"subroutine":37,"pod":30,"statement":392}]},"724":{"schedule_reload":[{"subroutine":36,"pod":29,"condition":19,"statement":391,"branch":97,"time":null}]},"745":{"search_banner":[{"branch":98,"time":null,"statement":398,"pod":32,"subroutine":39,"condition":19}]},"32":{"BEGIN":[{"condition":null,"pod":null,"subroutine":1,"statement":3,"time":null,"branch":null}]},"763":{"get_version":[{"condition":19,"pod":34,"subroutine":41,"statement":406,"time":null,"branch":101}]},"34":{"BEGIN":[{"condition":null,"pod":null,"subroutine":3,"statement":9,"time":null,"branch":null}]},"135":{"get_spoc_data":[{"statement":64,"condition":1,"pod":4,"subroutine":11,"time":null,"branch":6}]},"824":{"connect_ssh":[{"branch":107,"time":null,"pod":40,"subroutine":47,"condition":20,"statement":439}]},"803":{"con_shutdown":[{"condition":20,"subroutine":45,"pod":38,"statement":425,"time":null,"branch":105}]},"923":{"logging":[{"statement":499,"subroutine":57,"pod":50,"condition":21,"branch":112,"time":null}]},"627":{"cmd":[{"time":null,"branch":88,"statement":341,"condition":16,"pod":21,"subroutine":28}]},"887":{"compare":[{"statement":473,"subroutine":54,"pod":47,"condition":21,"branch":111,"time":null}]},"206":{"load_spoc":[{"branch":18,"time":null,"statement":108,"subroutine":14,"pod":7,"condition":1}]},"-1":{"__COVER__":[{"time":null,"branch":124,"statement":518,"condition":23,"pod":53,"subroutine":60}]},"733":{"checkidentity":[{"condition":19,"subroutine":38,"pod":31,"statement":393,"time":null,"branch":97}]},"880":{"compare_common":[{"condition":21,"pod":46,"subroutine":53,"statement":469,"time":null,"branch":111}]},"840":{"prepare_device":[{"statement":448,"pod":41,"subroutine":48,"condition":20,"branch":110,"time":null}]},"31":{"BEGIN":[{"branch":null,"time":null,"statement":null,"subroutine":null,"pod":null,"condition":null}]},"795":{"con_setup":[{"branch":104,"time":null,"subroutine":44,"pod":37,"condition":20,"statement":420}]},"37":{"BEGIN":[{"statement":18,"subroutine":6,"pod":null,"condition":null,"branch":null,"time":null}]},"526":{"route_line_destination_a_eq_b":[{"time":null,"branch":79,"statement":285,"condition":14,"pod":16,"subroutine":23}]},"217":{"load_device":[{"pod":8,"subroutine":15,"condition":1,"statement":116,"branch":18,"time":null}]},"875":{"found_changes":[{"time":null,"branch":111,"statement":465,"condition":21,"subroutine":52,"pod":45}]},"682":{"two_cmd":[{"statement":367,"pod":27,"subroutine":34,"condition":17,"branch":93,"time":null}]},"639":{"device_cmd":[{"statement":345,"subroutine":29,"pod":22,"condition":16,"branch":89,"time":null}]},"773":{"banner_msg":[{"time":null,"branch":102,"statement":412,"condition":20,"subroutine":42,"pod":35}]},"114":{"get_user_password":[{"branch":5,"time":null,"statement":52,"pod":3,"subroutine":10,"condition":1}]},"456":{"parse_config":[{"statement":244,"condition":6,"pod":13,"subroutine":20,"time":null,"branch":69}]},"533":{"unique":[{"time":null,"branch":79,"condition":15,"subroutine":24,"pod":17,"statement":287}]},"33":{"BEGIN":[{"pod":null,"subroutine":2,"condition":null,"statement":6,"branch":null,"time":null}]},"858":{"mark_as_unchanged":[{"branch":110,"time":null,"statement":457,"pod":43,"subroutine":50,"condition":20}]},"511":{"route_line_a_eq_b":[{"statement":279,"pod":15,"subroutine":22,"condition":10,"branch":76,"time":null}]},"863":{"print_change_status":[{"time":null,"branch":110,"statement":459,"condition":21,"subroutine":51,"pod":44}]},"815":{"con_set_logtype":[{"branch":106,"time":null,"subroutine":46,"pod":39,"condition":20,"statement":433}]},"35":{"BEGIN":[{"subroutine":4,"pod":null,"condition":null,"statement":12,"branch":null,"time":null}]},"618":{"issue_cmd":[{"subroutine":27,"pod":20,"condition":16,"statement":337,"branch":88,"time":null}]},"907":{"approve":[{"condition":21,"subroutine":56,"pod":49,"statement":487,"time":null,"branch":111}]},"241":{"add_prefix_info":[{"branch":18,"time":null,"statement":122,"subroutine":16,"pod":9,"condition":1}]}},"branch":[[80,{"text":"unless $system_user and $self->{'USER'} eq $system_user"}],[83,{"text":"unless my $aaa_credential = $self->{'CONFIG'}{'aaa_credentials'}"}],[84,{"text":"unless open my $file, '<', $aaa_credential"}],[101,{"text":"if ($count != 3)"}],[105,{"text":"if (match($pattern, $name))"}],[118,{"text":"unless open my $tty, '>:unix', '/dev/tty'"}],[138,{"text":"unless open my $file, '<', $spocfile"}],[140,{"text":"if ($line =~ /\\[ Model = (\\S+) ]/)"}],[143,{"text":"if ($line =~ /\\[ IP = (\\S+) ]/)"}],[156,{"text":"unless open my $file, '<', $path"}],[170,{"text":"unless open my $file, '<', $raw"}],[169,{"text":"if (-f $raw)"}],[178,{"text":"if ($prepend[$i] =~ /^\\[APPEND\\]\\s*$/)"}],[186,{"text":"if (defined $index)"}],[192,{"text":"if (my $count = @prepend)"}],[196,{"text":"if $msg"}],[195,{"text":"if (my $count = @append)"}],[199,{"text":"if ($msg)"}],[251,{"text":"if (my $subcmd = $parse_info->{$key}{'subcmd'})"}],[255,{"text":"if keys %$result"}],[272,{"text":"if (my $msg = $part->{'error'})"}],[277,{"text":"/^\\$(.*)/ ? :"}],[277,{"text":"$params ? :"}],[281,{"text":"if $parser"}],[290,{"text":"if $parser"}],[292,{"text":"unless (defined $value)"}],[296,{"text":"if (my $key = $part->{'store'})"}],[295,{"text":"if (defined $value)"}],[279,{"text":"if (my $keys = $part->{'store_multi'}) { }"}],[265,{"text":"if (not $ref) { }"}],[265,{"text":"elsif ($ref eq 'HASH') { }"}],[265,{"text":"elsif ($ref eq 'CODE') { }"}],[265,{"text":"elsif ($ref eq 'ARRAY') { }"}],[315,{"text":"if $success"}],[320,{"text":"unless $success"}],[310,{"text":"if ($type eq 'seq') { }"}],[310,{"text":"elsif ($type eq 'or') { }"}],[310,{"text":"elsif ($type eq 'cond1') { }"}],[347,{"text":"unless keys %$result"}],[333,{"text":"if (not $ref) { }"}],[333,{"text":"elsif ($ref eq 'Regexp') { }"}],[333,{"text":"elsif ($ref eq 'CODE') { }"}],[333,{"text":"elsif ($ref eq 'ARRAY') { }"}],[363,{"text":"if (my $msg = $cmd_info->{'error'})"}],[367,{"text":"unless ($cmd_info->{'leave_cmd_as_arg'})"}],[372,{"text":"if ($named and $named ne 'from_parser')"}],[376,{"text":"$_ eq '_cmd' ? :"}],[377,{"text":"$cmd_info->{'params'} ? :"}],[379,{"text":"if $parser"}],[383,{"text":"unless my $parse_info = $cmd_info->{'subcmd'}"}],[386,{"text":"if (defined $value) { }"}],[385,{"text":"if (keys %$value2)"}],[381,{"text":"if (my $subcmds = $arg->{'subcmd'})"}],[394,{"text":"unless (defined $value)"}],[397,{"text":"unless (defined $value)"}],[401,{"text":"unless $name = $value->{'name'}"}],[400,{"text":"if ($named and $named eq 'from_parser')"}],[404,{"text":"if $named"}],[403,{"text":"if (ref $value eq 'HASH')"}],[409,{"text":"ref $store ? :"}],[416,{"text":"if $key eq '_cmd'"}],[411,{"text":"if ($named) { }"}],[420,{"text":"if $x eq '_cmd'"}],[431,{"text":"if $key =~ /(?:name|line|orig)/"}],[433,{"text":"unless $old->{$key} eq $value->{$key}"}],[432,{"text":"if (defined $old->{$key}) { }"}],[429,{"text":"if ($cmd_info->{'merge'}) { }"}],[428,{"text":"if (my $old = $dest->{$key}) { }"}],[424,{"text":"if ($cmd_info->{'multi'}) { }"}],[470,{"text":"unless ref $v eq 'HASH' and keys %$v"}],[469,{"text":"if (my(@keys) = grep({my $v = $raw_append->{$_};\nref $v eq 'ARRAY' unless ref $v eq 'HASH' and keys %$v;} keys %$raw_append))"}],[488,{"text":"$vrf ? :"}],[489,{"text":"if $count"}],[499,{"text":"if ($spoc_v->{$name})"}],[505,{"text":"if $count"}],[480,{"text":"if ($key eq 'ROUTING_VRF') { }"}],[513,{"text":"unless $a->{'BASE'} == $b->{'BASE'} and $a->{'MASK'} == $b->{'MASK'}"}],[518,{"text":"unless defined $a->{$key} and defined $b->{$key} and $a->{$key} eq $b->{$key}"}],[515,{"text":"if (defined $a->{$key} or defined $b->{$key})"}],[555,{"text":"$vrf ? :"}],[554,{"text":"unless ($spoc_routing)"}],[563,{"text":"if ($self->route_line_a_eq_b($c, $s))"}],[577,{"text":"if $r->{'DELETE'}"}],[584,{"text":"if $c->{'DELETE'}"}],[585,{"text":"if ($self->route_line_destination_a_eq_b($r, $c))"}],[594,{"text":"if $r->{'DELETE'}"}],[604,{"text":"if (ref $cmd eq 'ARRAY') { }"}],[598,{"text":"if (@cmds)"}],[629,{"text":"if ($self->{'COMPARE'}) { }"}],[652,{"text":"if ($echo ne $cmd)"}],[664,{"text":"if $self->{'RELOAD_SCHEDULED'} and $self->handle_reload_banner(\\$out)"}],[669,{"text":"if $need_reload"}],[675,{"text":"if ($self->cmd_check_error($cmd, $lines))"}],[697,{"text":"if $self->{'RELOAD_SCHEDULED'} and $self->handle_reload_banner(\\$out)"}],[706,{"text":"if $self->{'RELOAD_SCHEDULED'} and $self->handle_reload_banner(\\$out)"}],[712,{"text":"if $need_reload"}],[684,{"text":"if ($self->{'COMPARE'}) { }"}],[740,{"text":"unless $name eq $conf_name"}],[751,{"text":"unless my $check = $self->{'CONFIG'}{'checkbanner'}"}],[753,{"text":"if ($self->{'COMPARE'}) { }"}],[752,{"text":"if (not $self->search_banner($check))"}],[765,{"text":"unless (defined $self->{'VERSION'})"}],[789,{"text":"unless system(\"mv $logfile $logfile.$date\") == 0"}],[787,{"text":"if (-f $logfile)"}],[796,{"text":"if $self->{'CONSOLE'}"}],[807,{"text":"unless ($con->{'RESULT'}{'ERROR'})"}],[816,{"text":"unless my $logdir = $self->{'OPTS'}{'L'}"}],[829,{"text":"unless $expect->spawn(\"$^X $cmd\")"}],[833,{"text":"unless $expect->spawn('ssh', '-l', $user, $ip)"}],[828,{"text":"if (my $cmd = $ENV{'SIMULATE_ROUTER'}) { }"}],[865,{"text":"if ($self->{'CHANGE'}{$key}) { }"}],[914,{"text":"if ($self->found_changes)"}],[925,{"text":"unless my $logfile = $self->{'OPTS'}{'LOGFILE'}"}],[931,{"text":"unless defined chmod(0755, $dirname)"}],[930,{"text":"if (mkdir $dirname, 493) { }"}],[930,{"text":"elsif (not -d $dirname) { }"}],[929,{"text":"if ($dirname and not -d $dirname)"}],[944,{"text":"unless open STDOUT, '>', $logfile"}],[945,{"text":"unless chmod 0644, $logfile"}],[947,{"text":"unless open STDERR, '>&STDOUT'"}],[961,{"text":"unless open $lock_fh, '>', $lockfile"}],[965,{"text":"unless $file_exists or chmod 0666, $lockfile"}],[968,{"text":"unless flock $lock_fh, 6"}],[974,{"text":"unless close $lock_fh"}]],"statement":[31,31,31,32,32,32,33,33,33,34,34,34,35,35,35,36,36,36,37,37,37,45,46,47,55,58,61,62,64,76,77,78,79,80,83,84,86,87,90,91,92,93,97,97,99,100,101,102,105,106,107,110,114,115,118,119,121,122,123,124,125,126,127,128,135,136,138,139,140,141,143,144,145,148,149,153,154,156,157,158,160,161,162,166,167,168,169,170,171,172,176,177,178,179,180,185,186,187,188,190,192,193,195,196,197,199,200,202,206,207,208,209,210,211,212,213,217,218,219,220,221,222,241,242,243,244,245,246,247,248,249,251,252,255,259,260,261,262,262,263,264,265,269,272,273,275,276,277,277,279,280,281,283,284,286,289,290,292,293,295,296,297,299,304,307,309,310,315,320,324,327,331,332,333,336,339,342,345,346,347,348,352,359,360,361,362,363,364,366,367,368,370,371,372,373,375,377,376,377,378,379,380,381,383,384,385,386,387,390,394,395,397,398,400,401,403,404,405,406,408,409,410,411,412,415,416,418,419,420,421,422,424,425,425,428,429,430,431,432,433,438,443,448,452,456,458,459,460,461,462,466,467,468,469,469,470,473,474,477,478,480,481,482,483,484,485,486,487,488,489,495,496,497,498,499,500,502,503,505,511,513,514,515,518,522,526,527,533,534,534,539,545,547,548,550,551,552,553,554,555,556,557,560,561,562,563,564,565,570,575,575,575,577,578,579,583,584,585,586,587,588,591,593,594,595,596,598,599,600,601,602,603,604,605,608,611,612,618,619,620,621,627,629,630,633,639,640,641,645,646,647,651,652,653,655,660,661,662,664,666,667,668,669,670,674,675,676,682,684,685,688,689,690,691,694,695,697,698,699,700,703,704,706,707,708,709,711,712,717,718,719,724,729,733,734,735,738,740,745,746,750,751,752,753,754,757,763,764,765,766,768,769,773,774,775,781,786,787,788,789,795,796,797,798,799,803,804,805,806,807,808,809,811,815,816,817,818,819,820,824,825,825,826,827,828,829,833,836,840,841,842,843,844,845,846,850,851,858,859,863,864,864,865,866,869,875,876,876,876,880,881,882,883,887,888,889,890,891,892,893,894,895,899,900,901,902,903,907,908,909,910,911,912,913,914,915,916,918,919,923,925,926,929,930,931,938,942,944,945,947,958,959,960,961,965,968,973,974]}